<% content_for :title, "Showing timesheet" %>

<div class="md:w-2/3 w-full">
  <% if notice.present? %>
    <p class="py-2 px-3 bg-green-50 mb-5 text-green-500 font-medium rounded-md inline-block" id="notice"><%= notice %></p>
  <% end %>

  <h1 class="font-bold text-4xl">Showing timesheet</h1>

  <%= render @timesheet %>

  <!-- Time entries section -->
  <div class="mt-8">
    <div class="flex items-center justify-between">
      <h2 class="font-bold text-2xl">Time entries</h2>

      <%= link_to "Add time entry",
          new_timesheet_time_entry_path(@timesheet),
          class: "rounded-md px-3.5 py-2.5 bg-gray-100 hover:bg-gray-50 inline-block font-medium" %>
    </div>

    <div class="mt-4 space-y-3">
      <% if @timesheet.time_entries.any? %>
        <% @timesheet.time_entries.each do |entry| %>
          <div class="border rounded-md p-4">
            <div><strong>Job:</strong> <%= entry.job&.title || "No job" %></div>
            <div><strong>Date:</strong> <%= entry.work_date %></div>
            <div><strong>Hours:</strong> <%= entry.hours %></div>

            <% if entry.notes.present? %>
              <div><strong>Notes:</strong> <%= entry.notes %></div>
            <% end %>

            <div class="mt-3 flex gap-3">
              <%= link_to "Edit",
                  edit_timesheet_time_entry_path(@timesheet, entry),
                  class: "text-blue-600 hover:underline" %>

              <%= button_to "Delete",
                  timesheet_time_entry_path(@timesheet, entry),
                  method: :delete,
                  data: { turbo_confirm: "Are you sure?" },
                  class: "text-red-600 hover:underline" %>
            </div>
          </div>
        <% end %>
      <% else %>
        <p class="text-gray-600">No time entries yet.</p>
      <% end %>
    </div>
  </div>

  <!-- Existing actions -->
  <div class="mt-8">
    <%= link_to "Edit this timesheet", edit_timesheet_path(@timesheet), class: "w-full sm:w-auto text-center rounded-md px-3.5 py-2.5 bg-gray-100 hover:bg-gray-50 inline-block font-medium" %>
    <%= link_to "Back to timesheets", timesheets_path, class: "w-full sm:w-auto text-center mt-2 sm:mt-0 sm:ml-2 rounded-md px-3.5 py-2.5 bg-gray-100 hover:bg-gray-50 inline-block font-medium" %>
    <%= button_to "Destroy this timesheet", @timesheet, method: :delete, form_class: "sm:inline-block mt-2 sm:mt-0 sm:ml-2", class: "w-full rounded-md px-3.5 py-2.5 text-white bg-red-600 hover:bg-red-500 font-medium cursor-pointer", data: { turbo_confirm: "Are you sure?" } %>
  </div>
</div>
